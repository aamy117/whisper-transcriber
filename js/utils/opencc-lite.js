/**
 * OpenCC Lite - 簡繁轉換輕量版
 * 基於 OpenCC 詞庫的 JavaScript 實現
 */

export class OpenCCLite {
    constructor() {
        // 建立簡繁對照表
        this.s2tMap = new Map();
        this.initializeMapping();
    }

    /**
     * 初始化簡繁對照表
     */
    initializeMapping() {
        // 常用漢字對照表（按使用頻率排序）
        const mappings = {
            // 最常用字
            '的': '的', '是': '是', '不': '不', '我': '我', '有': '有',
            '在': '在', '人': '人', '这': '這', '个': '個', '们': '們',
            '中': '中', '来': '來', '上': '上', '大': '大', '为': '為',
            '和': '和', '国': '國', '地': '地', '到': '到', '以': '以',
            '说': '說', '时': '時', '要': '要', '就': '就', '出': '出',
            '会': '會', '可': '可', '也': '也', '你': '你', '对': '對',
            '生': '生', '能': '能', '而': '而', '子': '子', '那': '那',
            '得': '得', '于': '於', '着': '著', '下': '下', '自': '自',
            '之': '之', '年': '年', '过': '過', '发': '發', '后': '後',
            '作': '作', '里': '裡', '用': '用', '道': '道', '行': '行',
            '所': '所', '然': '然', '家': '家', '种': '種', '事': '事',
            '成': '成', '方': '方', '多': '多', '经': '經', '么': '麼',
            '去': '去', '法': '法', '学': '學', '如': '如', '都': '都',
            '同': '同', '现': '現', '当': '當', '没': '沒', '动': '動',
            '面': '面', '起': '起', '看': '看', '定': '定', '天': '天',
            '分': '分', '还': '還', '进': '進', '好': '好', '小': '小',
            '部': '部', '其': '其', '些': '些', '主': '主', '样': '樣',
            '理': '理', '心': '心', '她': '她', '本': '本', '前': '前',
            '开': '開', '但': '但', '因': '因', '只': '只', '从': '從',
            '想': '想', '实': '實', '日': '日', '军': '軍', '者': '者',
            '意': '意', '无': '無', '力': '力', '它': '它', '与': '與',
            '长': '長', '把': '把', '机': '機', '十': '十', '民': '民',
            '第': '第', '公': '公', '此': '此', '已': '已', '工': '工',
            '使': '使', '情': '情', '明': '明', '性': '性', '知': '知',
            '全': '全', '三': '三', '又': '又', '关': '關', '点': '點',
            '正': '正', '业': '業', '外': '外', '将': '將', '两': '兩',
            '高': '高', '间': '間', '由': '由', '问': '問', '很': '很',
            '最': '最', '重': '重', '并': '並', '物': '物', '手': '手',
            '应': '應', '战': '戰', '向': '向', '头': '頭', '文': '文',
            '体': '體', '政': '政', '美': '美', '相': '相', '见': '見',
            '被': '被', '利': '利', '什': '什', '二': '二', '等': '等',
            '产': '產', '或': '或', '新': '新', '己': '己', '制': '制',
            '身': '身', '果': '果', '加': '加', '西': '西', '斯': '斯',
            '月': '月', '话': '話', '合': '合', '回': '回', '特': '特',
            '代': '代', '内': '內', '信': '信', '表': '表', '化': '化',
            '老': '老', '给': '給', '世': '世', '位': '位', '次': '次',
            '度': '度', '门': '門', '任': '任', '常': '常', '先': '先',
            '海': '海', '通': '通', '教': '教', '儿': '兒', '原': '原',
            '东': '東', '声': '聲', '提': '提', '立': '立', '及': '及',
            '比': '比', '员': '員', '解': '解', '水': '水', '名': '名',
            '真': '真', '论': '論', '处': '處', '走': '走', '义': '義',
            '各': '各', '入': '入', '几': '幾', '口': '口', '认': '認',
            '条': '條', '平': '平', '系': '系', '气': '氣', '题': '題',
            '活': '活', '尔': '爾', '更': '更', '别': '別', '打': '打',
            '女': '女', '变': '變', '四': '四', '神': '神', '总': '總',
            '何': '何', '电': '電', '数': '數', '安': '安', '少': '少',
            '报': '報', '才': '才', '结': '結', '反': '反', '受': '受',
            '目': '目', '太': '太', '量': '量', '再': '再', '感': '感',
            '建': '建', '务': '務', '做': '做', '接': '接', '必': '必',
            '场': '場', '件': '件', '计': '計', '管': '管', '期': '期',
            '市': '市', '直': '直', '德': '德', '资': '資', '命': '命',
            '山': '山', '金': '金', '指': '指', '克': '克', '许': '許',
            '统': '統', '区': '區', '保': '保', '至': '至', '队': '隊',
            '形': '形', '社': '社', '便': '便', '空': '空', '决': '決',
            '治': '治', '展': '展', '马': '馬', '科': '科', '司': '司',
            '五': '五', '基': '基', '眼': '眼', '书': '書', '非': '非',
            '则': '則', '听': '聽', '白': '白', '却': '卻', '界': '界',
            '达': '達', '光': '光', '放': '放', '强': '強', '即': '即',
            '像': '像', '难': '難', '且': '且', '权': '權', '思': '思',
            '王': '王', '象': '象', '完': '完', '设': '設', '式': '式',
            '色': '色', '路': '路', '记': '記', '南': '南', '品': '品',
            '住': '住', '告': '告', '类': '類', '求': '求', '据': '據',
            '程': '程', '北': '北', '边': '邊', '死': '死', '张': '張',
            '该': '該', '交': '交', '规': '規', '万': '萬', '取': '取',
            '拉': '拉', '格': '格', '望': '望', '觉': '覺', '术': '術',
            '领': '領', '共': '共', '确': '確', '传': '傳', '师': '師',
            '观': '觀', '清': '清', '今': '今', '切': '切', '院': '院',
            '让': '讓', '识': '識', '候': '候', '带': '帶', '导': '導',
            '争': '爭', '运': '運', '笑': '笑', '飞': '飛', '风': '風',
            '步': '步', '改': '改', '收': '收', '根': '根', '干': '幹',
            '造': '造', '言': '言', '联': '聯', '持': '持', '组': '組',
            '每': '每', '济': '濟', '车': '車', '亲': '親', '极': '極',
            '林': '林', '服': '服', '快': '快', '办': '辦', '议': '議',
            '往': '往', '元': '元', '英': '英', '士': '士', '证': '證',
            '近': '近', '失': '失', '转': '轉', '夫': '夫', '令': '令',
            '准': '準', '布': '布', '始': '始', '怎': '怎', '呢': '呢',
            '存': '存', '未': '未', '远': '遠', '叫': '叫', '台': '臺',
            '单': '單', '影': '影', '具': '具', '罗': '羅', '字': '字',
            '爱': '愛', '击': '擊', '流': '流', '备': '備', '兵': '兵',
            '连': '連', '调': '調', '深': '深', '商': '商', '算': '算',
            '质': '質', '团': '團', '集': '集', '百': '百', '需': '需',
            '价': '價', '花': '花', '党': '黨', '华': '華', '城': '城',
            '石': '石', '级': '級', '整': '整', '府': '府', '离': '離',
            '况': '況', '亚': '亞', '请': '請', '技': '技', '际': '際',
            '约': '約', '示': '示', '复': '複', '病': '病', '息': '息',
            '究': '究', '线': '線', '似': '似', '官': '官', '火': '火',
            '断': '斷', '精': '精', '满': '滿', '支': '支', '视': '視',
            '消': '消', '越': '越', '器': '器', '容': '容', '照': '照',
            '须': '須', '九': '九', '增': '增', '研': '研', '写': '寫',
            '称': '稱', '企': '企', '八': '八', '功': '功', '吗': '嗎',
            '包': '包', '片': '片', '史': '史', '委': '委', '乎': '乎',
            '查': '查', '轻': '輕', '易': '易', '早': '早', '曾': '曾',
            '除': '除', '农': '農', '找': '找', '装': '裝', '广': '廣',
            '显': '顯', '吧': '吧', '阿': '阿', '李': '李', '标': '標',
            '谈': '談', '吃': '吃', '图': '圖', '念': '念', '六': '六',
            '引': '引', '历': '歷', '首': '首', '医': '醫', '局': '局',
            '突': '突', '专': '專', '费': '費', '号': '號', '尽': '盡',
            '另': '另', '周': '周', '较': '較', '注': '注', '语': '語',
            '仅': '僅', '考': '考', '落': '落', '青': '青', '随': '隨',
            '选': '選', '列': '列', '武': '武', '红': '紅', '响': '響',
            '虽': '雖', '推': '推', '势': '勢', '参': '參', '希': '希',
            '古': '古', '众': '眾', '构': '構', '房': '房', '半': '半',
            '节': '節', '土': '土', '投': '投', '某': '某', '案': '案',
            '黑': '黑', '维': '維', '革': '革', '划': '劃', '敌': '敵',
            '致': '致', '陈': '陳', '律': '律', '足': '足', '态': '態',
            '护': '護', '七': '七', '兴': '興', '派': '派', '孩': '孩',
            '验': '驗', '责': '責', '营': '營', '星': '星', '够': '夠',
            '章': '章', '音': '音', '跟': '跟', '志': '志', '底': '底',
            '站': '站', '严': '嚴', '巴': '巴', '例': '例', '防': '防',
            '族': '族', '供': '供', '效': '效', '续': '續', '施': '施',
            '留': '留', '讲': '講', '型': '型', '料': '料', '终': '終',
            '率': '率', '或': '或', '独': '獨', '境': '境', '客': '客',
            '火': '火', '局': '局', '伤': '傷', '班': '班', '讨': '討',
            '哪': '哪', '夜': '夜', '刚': '剛', '朝': '朝', '板': '板',
            '脸': '臉', '庄': '莊', '助': '助', '奇': '奇', '诺': '諾',
            '兰': '蘭', '送': '送', '康': '康', '帝': '帝', '危': '危',
            '玛': '瑪', '速': '速', '创': '創', '角': '角', '读': '讀',
            '云': '雲', '破': '破', '环': '環', '州': '州', '楼': '樓',
            '努': '努', '游': '遊', '乡': '鄉', '树': '樹', '温': '溫',
            '检': '檢', '组': '組', '纪': '紀', '爷': '爺', '双': '雙',
            '顺': '順', '帮': '幫', '汉': '漢', '画': '畫', '诉': '訴',
            '刻': '刻', '判': '判', '担': '擔', '钟': '鐘', '讨': '討',
            '罪': '罪', '笔': '筆', '筑': '築', '弟': '弟', '店': '店',
            '负': '負', '县': '縣', '获': '獲', '监': '監', '坚': '堅',
            '苏': '蘇', '顾': '顧', '托': '託', '威': '威', '雅': '雅',
            '宗': '宗', '积': '積', '余': '餘', '痛': '痛', '检': '檢',
            '差': '差', '富': '富', '灵': '靈', '协': '協', '角': '角',
            '占': '佔', '配': '配', '征': '徵', '修': '修', '皮': '皮',
            '挥': '揮', '胜': '勝', '降': '降', '阶': '階', '审': '審',
            '沉': '沉', '坚': '堅', '善': '善', '妈': '媽', '刘': '劉',
            '读': '讀', '啊': '啊', '超': '超', '免': '免', '压': '壓',
            '银': '銀', '买': '買', '皇': '皇', '养': '養', '伊': '伊',
            '怀': '懷', '执': '執', '副': '副', '乱': '亂', '抗': '抗',
            '犯': '犯', '追': '追', '帮': '幫', '宣': '宣', '佛': '佛',
            '岁': '歲', '航': '航', '优': '優', '怪': '怪', '香': '香',
            '著': '著', '田': '田', '铁': '鐵', '控': '控', '税': '稅',
            '左': '左', '右': '右', '份': '份', '穿': '穿', '艺': '藝',
            '背': '背', '阵': '陣', '草': '草', '脚': '腳', '概': '概',
            '恶': '惡', '适': '適', '便': '便', '剧': '劇', '河': '河',
            '米': '米', '围': '圍', '江': '江', '织': '織', '害': '害',
            '斗': '鬥', '双': '雙', '境': '境', '客': '客', '纪': '紀',
            '采': '採', '举': '舉', '杀': '殺', '攻': '攻', '父': '父',
            '苦': '苦', '密': '密', '低': '低', '朋': '朋', '友': '友',
            '诚': '誠', '各': '各', '换': '換', '孙': '孫', '佛': '佛',
            '休': '休', '普': '普', '香': '香', '渐': '漸', '尚': '尚',
            '毫': '毫', '优': '優', '皇': '皇', '污': '汙', '倒': '倒',
            '杯': '杯', '拥': '擁', '午': '午', '遗': '遺', '愿': '願',
            '摆': '擺', '烈': '烈', '伦': '倫', '延': '延', '胡': '胡',
            '君': '君', '谷': '谷', '野': '野', '获': '獲', '亦': '亦',
            '烟': '煙', '妇': '婦', '冷': '冷', '警': '警', '洋': '洋',
            '错': '錯', '散': '散', '汗': '汗', '阴': '陰', '丰': '豐',
            '尼': '尼', '册': '冊', '缓': '緩', '践': '踐', '纳': '納',
            '肉': '肉', '茶': '茶', '淡': '淡', '恩': '恩', '纽': '紐',
            '挂': '掛', '罢': '罷', '订': '訂', '徒': '徒', '播': '播',
            '抓': '抓', '伟': '偉', '析': '析', '厂': '廠', '碰': '碰',
            '瓦': '瓦', '萨': '薩', '巨': '巨', '耕': '耕', '坐': '坐',
            '遍': '遍', '偿': '償', '卫': '衛', '芬': '芬', '奋': '奮',
            '库': '庫', '尝': '嘗', '盛': '盛', '雪': '雪', '摩': '摩',
            '薄': '薄', '悄': '悄', '厅': '廳', '毛': '毛', '熟': '熟',
            '骑': '騎', '宾': '賓', '县': '縣', '邀': '邀', '掉': '掉',
            '恰': '恰', '横': '橫', '拜': '拜', '毒': '毒', '扫': '掃',
            '敏': '敏', '措': '措', '载': '載', '诸': '諸', '溪': '溪',
            '辞': '辭', '汇': '匯', '怒': '怒', '哲': '哲', '郊': '郊',
            '禁': '禁', '趣': '趣', '祝': '祝', '艰': '艱', '哭': '哭',
            '懂': '懂', '墙': '牆', '袭': '襲', '颜': '顏', '劝': '勸',
            '统': '統', '牌': '牌', '售': '售', '皆': '皆', '键': '鍵',
            '尾': '尾', '灾': '災', '凭': '憑', '仪': '儀', '谅': '諒',
            '牺': '犧', '梅': '梅', '狗': '狗', '辩': '辯', '赖': '賴',
            '彩': '彩', '凤': '鳳', '储': '儲', '倍': '倍', '矛': '矛',
            '屋': '屋', '辛': '辛', '词': '詞', '折': '折', '贸': '貿',
            '吴': '吳', '赵': '趙', '硬': '硬', '卷': '卷', '扰': '擾',
            '辆': '輛', '蒙': '蒙', '番': '番', '择': '擇', '秋': '秋',
            '伍': '伍', '茫': '茫', '卖': '賣', '援': '援', '混': '混',
            '既': '既', '凝': '凝', '冲': '沖', '挑': '挑', '奥': '奧',
            '债': '債', '惯': '慣', '龄': '齡', '岸': '岸', '赢': '贏',
            '惊': '驚', '唯': '唯', '谓': '謂', '坦': '坦', '牲': '牲',
            '洛': '洛', '颇': '頗', '乔': '喬', '宇': '宇', '伯': '伯',
            '腊': '臘', '迫': '迫', '胸': '胸', '刊': '刊', '祖': '祖',
            '逐': '逐', '皱': '皺', '饰': '飾', '缺': '缺', '赏': '賞',
            '药': '藥', '斜': '斜', '疏': '疏', '忘': '忘', '亡': '亡',
            '惧': '懼', '盗': '盜', '肩': '肩', '虚': '虛', '玄': '玄',
            '妙': '妙', '尔': '爾', '凶': '兇', '绿': '綠', '驶': '駛',
            '栏': '欄', '吊': '弔', '妨': '妨', '驻': '駐', '绩': '績',
            '慧': '慧', '矿': '礦', '届': '屆', '押': '押', '违': '違',
            '拨': '撥', '奏': '奏', '夏': '夏', '诊': '診', '擦': '擦',
            '灰': '灰', '垂': '垂', '蓝': '藍', '翰': '翰', '泊': '泊',
            '恨': '恨', '爹': '爹', '饮': '飲', '井': '井', '赤': '赤',
            '涌': '湧', '勇': '勇', '曼': '曼', '凌': '凌', '猛': '猛',
            '宁': '寧', '滚': '滾', '弯': '彎', '吨': '噸', '琴': '琴',
            '柳': '柳', '详': '詳', '猜': '猜', '沿': '沿', '弃': '棄',
            '欧': '歐', '惠': '惠', '圆': '圓', '珍': '珍', '祸': '禍',
            '沙': '沙', '饭': '飯', '滑': '滑', '狂': '狂', '暂': '暫',
            '析': '析', '肯': '肯', '项': '項', '荒': '荒', '泰': '泰',
            '贵': '貴', '仁': '仁', '遭': '遭', '耶': '耶', '漫': '漫',
            '符': '符', '仰': '仰', '械': '械', '咬': '咬', '邦': '邦',
            '凭': '憑', '宽': '寬', '惜': '惜', '苹': '蘋', '欲': '欲',
            '酒': '酒', '踪': '蹤', '趁': '趁', '撞': '撞', '沟': '溝',
            '鲁': '魯', '纹': '紋', '池': '池', '盟': '盟', '熊': '熊',
            '锁': '鎖', '释': '釋', '叹': '嘆', '雾': '霧', '泪': '淚',
            '玉': '玉', '截': '截', '赴': '赴', '哀': '哀', '霍': '霍',
            '忆': '憶', '陆': '陸', '贯': '貫', '邮': '郵', '吹': '吹',
            '隆': '隆', '驾': '駕', '俱': '俱', '泉': '泉', '彼': '彼',
            '袋': '袋', '剩': '剩', '挺': '挺', '粗': '粗', '紧': '緊',
            '絮': '絮', '隐': '隱', '忍': '忍', '辟': '闢', '焦': '焦',
            '迁': '遷', '仇': '仇', '障': '障', '讯': '訊', '蓄': '蓄',
            '乌': '烏', '蒂': '蒂', '巧': '巧', '劳': '勞', '逊': '遜',
            '邻': '鄰', '赐': '賜', '墓': '墓', '惑': '惑', '阅': '閱',
            '幻': '幻', '峰': '峰', '尖': '尖', '拟': '擬', '雷': '雷',
            '辉': '輝', '贡': '貢', '播': '播', '盘': '盤', '疯': '瘋',
            '稀': '稀', '渔': '漁', '剂': '劑', '测': '測', '魂': '魂',
            '尘': '塵', '饿': '餓', '浮': '浮', '卓': '卓', '枪': '槍',
            '锋': '鋒', '纯': '純', '剑': '劍', '岗': '崗', '伦': '倫',
            '乳': '乳', '粮': '糧', '摄': '攝', '坛': '壇', '拓': '拓',
            '蛋': '蛋', '彻': '徹', '违': '違', '雨': '雨', '冒': '冒',
            '啥': '啥', '寿': '壽', '译': '譯', '浸': '浸', '塔': '塔',
            '穷': '窮', '漏': '漏', '枝': '枝', '赔': '賠', '郑': '鄭',
            '牵': '牽', '逮': '逮', '割': '割', '凯': '凱', '胆': '膽',
            '隶': '隸', '聚': '聚', '钓': '釣', '询': '詢', '衡': '衡',
            '奈': '奈', '艾': '艾', '桌': '桌', '吵': '吵', '葬': '葬',
            '滋': '滋', '沃': '沃', '疆': '疆', '烦': '煩', '览': '覽',
            '贷': '貸', '坏': '壞', '讯': '訊', '矮': '矮', '茂': '茂',
            '禅': '禪', '侧': '側', '潜': '潛', '纷': '紛', '苗': '苗',
            '浅': '淺', '铺': '鋪', '敞': '敞', '岩': '岩', '勉': '勉',
            '械': '械', '肥': '肥', '频': '頻', '盈': '盈', '庭': '庭',
            '妆': '妝', '岭': '嶺', '谱': '譜', '劲': '勁', '缩': '縮',
            '链': '鏈', '渠': '渠', '盆': '盆', '逝': '逝', '纲': '綱',
            '贫': '貧', '晃': '晃', '拢': '攏', '醒': '醒', '鸟': '鳥',
            '龙': '龍', '驱': '驅', '滨': '濱', '冻': '凍', '颂': '頌',
            '刷': '刷', '丛': '叢', '赫': '赫', '泽': '澤', '旨': '旨',
            // 繼續添加更多對照...
        };

        // 將對照表加入 Map
        for (const [simplified, traditional] of Object.entries(mappings)) {
            this.s2tMap.set(simplified, traditional);
        }
    }

    /**
     * 簡體轉繁體
     */
    convert(text) {
        if (!text) return text;

        let result = '';

        // 逐字轉換
        for (const char of text) {
            const traditional = this.s2tMap.get(char);
            result += traditional || char;
        }

        return result;
    }
}

// 匯出單例
export const opencc = new OpenCCLite();
