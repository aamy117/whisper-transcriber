# WASM 生產環境測試指南

## 測試頁面位置
`test/test-production-wasm.html`

## 測試步驟

### 1. 環境檢查（自動執行）
頁面載入時會自動檢查：
- ✅ 瀏覽器相容性（Chrome/Firefox/Safari）
- ✅ WebAssembly 支援
- ✅ 可用記憶體（建議 > 500MB）
- ✅ 網路連接（CDN 可達性）

### 2. 模型載入測試
依序測試三種模型：
1. **Tiny 模型** (~39MB)
   - 點擊「載入測試」按鈕
   - 觀察下載進度
   - 確認載入成功
   
2. **Base 模型** (~74MB)
   - 點擊「載入測試」按鈕
   - 第二次測試應該從快取載入（速度更快）
   
3. **Small 模型** (~244MB)
   - 點擊「載入測試」按鈕
   - 可能需要較長時間下載

### 3. 轉譯功能測試
1. 準備測試音訊檔案（支援 mp3/wav/m4a 等格式）
2. 拖放檔案到上傳區域或點擊選擇
3. 選擇模型（建議使用 Base）
4. 點擊「開始轉譯測試」
5. 觀察轉譯進度和結果

### 4. 效能測試
點擊「執行效能測試」按鈕，測試：
- 快取檢查速度
- Audio Context 創建速度
- Worker 創建速度

## 預期結果

### 成功指標
- ✅ 所有環境檢查通過
- ✅ 至少一個模型成功載入
- ✅ 轉譯功能正常運作
- ✅ 效能評分為「優秀」或「良好」

### 常見問題

1. **模型下載失敗**
   - 檢查網路連接
   - 確認可以訪問 huggingface.co
   - 嘗試使用 VPN

2. **記憶體不足**
   - 關閉其他瀏覽器標籤
   - 使用較小的模型（Tiny）
   - 重啟瀏覽器

3. **轉譯速度慢**
   - 正常現象，WASM 比 API 慢
   - 使用較小的模型可提升速度
   - 確保電腦有足夠的處理能力

## 測試記錄

### 檢查點清單
- [ ] 環境檢查全部通過
- [ ] Tiny 模型載入成功
- [ ] Base 模型載入成功
- [ ] Small 模型載入成功
- [ ] 模型快取功能正常
- [ ] 音訊轉譯功能正常
- [ ] 轉譯結果包含繁體中文
- [ ] 效能測試通過

### 測試環境資訊
請記錄以下資訊：
- 瀏覽器版本：
- 作業系統：
- 可用記憶體：
- 網路速度：
- 測試日期：

## 生產環境部署注意事項

1. **CDN 配置**
   - 目前使用 jsdelivr CDN 載入 Transformers.js
   - 模型從 Hugging Face 自動下載
   - 考慮設置備用 CDN

2. **快取策略**
   - 模型會自動快取到 IndexedDB
   - 使用者可以清除快取重新下載
   - 注意儲存空間限制

3. **錯誤處理**
   - 確保所有錯誤都有適當的提示
   - 提供重試機制
   - 記錄錯誤日誌

4. **效能優化**
   - 建議預設使用 Base 模型
   - 考慮實作模型預載入
   - 監控記憶體使用量

## 下一步行動

如果所有測試通過：
1. ✅ 確認 WASM 功能在生產環境可用
2. ✅ 開始更新使用者文檔
3. ✅ 考慮實作模型預載入功能
4. ✅ 準備正式發布

如果測試失敗：
1. 🔍 檢查錯誤日誌
2. 🔍 確認網路和環境設定
3. 🔍 嘗試其他瀏覽器
4. 🔍 聯繫開發團隊