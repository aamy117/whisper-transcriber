<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ–‡å­—è½‰æ›æ¸¬è©¦</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 6px;
        }
        .input-output {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 15px 0;
        }
        .box {
            padding: 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .box h3 {
            margin-top: 0;
            color: #666;
        }
        .text-display {
            font-size: 16px;
            line-height: 1.6;
            min-height: 50px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            font-family: inherit;
        }
        .test-case {
            margin: 10px 0;
            padding: 10px;
            background: #e8f5e9;
            border-radius: 4px;
        }
        .fail {
            background: #ffebee;
        }
        .options {
            margin: 15px 0;
        }
        label {
            margin-right: 15px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”¤ æ–‡å­—è½‰æ›æ¸¬è©¦</h1>
        
        <!-- æ‰‹å‹•æ¸¬è©¦ -->
        <div class="test-section">
            <h2>æ‰‹å‹•æ¸¬è©¦</h2>
            <textarea id="inputText" placeholder="è¼¸å…¥ç°¡é«”ä¸­æ–‡æˆ–å¸¶æ¨™é»çš„æ–‡å­—...">
è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å¥å­ï¼ŒåŒ…å«ç®€ä½“å­—å’Œæ ‡ç‚¹ç¬¦å·ï¼è¯·è½¬æ¢ä¸ºç¹ä½“å­—ã€‚
ç”µè„‘ã€è½¯ä»¶ã€ç½‘ç»œã€åº”ç”¨ç¨‹åºç­‰è¯æ±‡éƒ½éœ€è¦è½¬æ¢ã€‚
</textarea>
            
            <div class="options">
                <label>
                    <input type="checkbox" id="convertTraditional" checked> ç°¡è½‰ç¹
                </label>
                <label>
                    <input type="checkbox" id="removePunctuation" checked> ç§»é™¤æ¨™é»
                </label>
            </div>
            
            <button onclick="testConversion()">è½‰æ›</button>
            
            <div class="input-output">
                <div class="box">
                    <h3>åŸå§‹æ–‡å­—</h3>
                    <div class="text-display" id="originalText"></div>
                </div>
                <div class="box">
                    <h3>è½‰æ›çµæœ</h3>
                    <div class="text-display" id="convertedText"></div>
                </div>
            </div>
        </div>
        
        <!-- è‡ªå‹•æ¸¬è©¦ -->
        <div class="test-section">
            <h2>è‡ªå‹•æ¸¬è©¦æ¡ˆä¾‹</h2>
            <button onclick="runAllTests()">åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦</button>
            <div id="testResults"></div>
        </div>
    </div>

    <script type="module">
        import { textConverter } from './js/utils/text-converter.js';
        
        // æ¸¬è©¦æ¡ˆä¾‹
        const testCases = [
            {
                name: 'åŸºæœ¬ç°¡ç¹è½‰æ›',
                input: 'è¿™æ˜¯ç®€ä½“ä¸­æ–‡',
                expected: 'é€™æ˜¯ç°¡é«”ä¸­æ–‡',
                options: { removePunctuation: false }
            },
            {
                name: 'ç§»é™¤æ¨™é»ç¬¦è™Ÿ',
                input: 'ä½ å¥½ï¼Œä¸–ç•Œï¼é€™æ˜¯æ¸¬è©¦ã€‚',
                expected: 'ä½ å¥½ ä¸–ç•Œ é€™æ˜¯æ¸¬è©¦',
                options: { convertToTraditional: false, removePunctuation: true }
            },
            {
                name: 'ç°¡ç¹è½‰æ› + ç§»é™¤æ¨™é»',
                input: 'è¿™æ˜¯æµ‹è¯•ï¼ŒåŒ…å«æ ‡ç‚¹ç¬¦å·ï¼',
                expected: 'é€™æ˜¯æ¸¬è©¦ åŒ…å«æ¨™é»ç¬¦è™Ÿ',
                options: { convertToTraditional: true, removePunctuation: true }
            },
            {
                name: 'é›»è…¦ç›¸é—œè©å½™',
                input: 'ç”µè„‘è½¯ä»¶ç½‘ç»œåº”ç”¨ç¨‹åºæ•°æ®åº“',
                expected: 'é›»è…¦è»Ÿä»¶ç¶²çµ¡æ‡‰ç”¨ç¨‹åºæ•¸æ“šåº«',
                options: { removePunctuation: false }
            },
            {
                name: 'å¸¸ç”¨å­—è½‰æ›',
                input: 'çˆ±å›½ä¼šè¿™å¯¹å¼€å…³é—¨æ—¶ä¸ªæ¥ä¸ºå‘è¯´',
                expected: 'æ„›åœ‹æœƒé€™å°é–‹é—œé–€æ™‚å€‹ä¾†ç‚ºç™¼èªª',
                options: { removePunctuation: false }
            },
            {
                name: 'æ··åˆæ¨™é»è™•ç†',
                input: 'ä¸­æ–‡æ¨™é»ï¼Œã€‚ï¼ï¼Ÿå’ŒEnglish punctuation, . ! ?',
                expected: 'ä¸­æ–‡æ¨™é» å’ŒEnglish punctuation',
                options: { removePunctuation: true }
            }
        ];
        
        // æ‰‹å‹•æ¸¬è©¦å‡½æ•¸
        window.testConversion = function() {
            const input = document.getElementById('inputText').value;
            const convertTraditional = document.getElementById('convertTraditional').checked;
            const removePunctuation = document.getElementById('removePunctuation').checked;
            
            const options = {
                convertToTraditional: convertTraditional,
                removePunctuation: removePunctuation
            };
            
            const result = textConverter.processTranscriptionText(input, options);
            
            document.getElementById('originalText').textContent = input;
            document.getElementById('convertedText').textContent = result;
        };
        
        // åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
        window.runAllTests = function() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = '';
            
            let passCount = 0;
            let failCount = 0;
            
            testCases.forEach((testCase, index) => {
                const result = textConverter.processTranscriptionText(testCase.input, testCase.options);
                const passed = result === testCase.expected;
                
                if (passed) passCount++;
                else failCount++;
                
                const caseDiv = document.createElement('div');
                caseDiv.className = `test-case ${passed ? '' : 'fail'}`;
                caseDiv.innerHTML = `
                    <strong>æ¸¬è©¦ ${index + 1}: ${testCase.name}</strong><br>
                    è¼¸å…¥: ${testCase.input}<br>
                    é æœŸ: ${testCase.expected}<br>
                    å¯¦éš›: ${result}<br>
                    çµæœ: ${passed ? 'âœ… é€šé' : 'âŒ å¤±æ•—'}
                `;
                resultsDiv.appendChild(caseDiv);
            });
            
            // ç¸½çµ
            const summaryDiv = document.createElement('div');
            summaryDiv.style.marginTop = '20px';
            summaryDiv.style.fontWeight = 'bold';
            summaryDiv.innerHTML = `
                æ¸¬è©¦ç¸½çµ: é€šé ${passCount} / ${testCases.length} å€‹æ¸¬è©¦
                ${failCount > 0 ? `<br>å¤±æ•—: ${failCount} å€‹` : ''}
            `;
            resultsDiv.appendChild(summaryDiv);
        };
        
        // åˆå§‹åŒ–é¡¯ç¤º
        window.addEventListener('DOMContentLoaded', () => {
            // é¡¯ç¤ºåˆå§‹ç¯„ä¾‹
            const input = document.getElementById('inputText').value;
            document.getElementById('originalText').textContent = input;
        });
    </script>
</body>
</html>